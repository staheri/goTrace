/*SCHED 921ms: gomaxprocs=2 idleprocs=2 threads=4 spinningthreads=0 idlethreads=2 runqueue=0 gcwaiting=0 nmidlelocked=0 stopwait=0 sysmonwait=0
  P0: status=1 schedtick=2 syscalltick=1 m=0 runqsize=0 gfreecnt=0
  P1: status=0 schedtick=3 syscalltick=0 m=-1 runqsize=0 gfreecnt=0
  M3: p=-1 curg=-1 mallocing=0 throwing=0 preemptoff= locks=0 dying=0 spinning=false blocked=true lockedg=-1
  M2: p=-1 curg=-1 mallocing=0 throwing=0 preemptoff= locks=0 dying=0 spinning=false blocked=true lockedg=-1
  M1: p=-1 curg=-1 mallocing=0 throwing=0 preemptoff= locks=1 dying=0 spinning=false blocked=false lockedg=-1
  M0: p=-1 curg=7 mallocing=0 throwing=0 preemptoff= locks=0 dying=0 spinning=false blocked=true lockedg=-1
  G1: status=4(sleep) m=-1 lockedm=-1
  G2: status=4(force gc (idle)) m=-1 lockedm=1
  G3: status=4(GC sweep wait) m=-1 lockedm=-1
  G4: status=4(GC scavenge wait) m=-1 lockedm=-1
  G7: status=3() m=0 lockedm=-1
  G6: status=4(chan send) m=-1 lockedm=-1*/

digraph g{
   rankdir=LR;


  S0 [label = "test", style=invis]
  P0 [label = "P0\lrq:0\lgcnt=0", group=p, shape=box]
  P1 [label = "P1\lrq:0\lgcnt=0", group=p, shape=box]

  G1 [label = "G1" , shape= circle , group=g, color=red]
  GL1 [label = "sleep" , group=gl, color=white]

  G2 [label = "G2" , shape=circle , group=g, color=red style=dashed]
  GL2 [label = "force gc (idle)" , group=gl, color=white]

  G3 [label = "G3" , shape= circle , group=g, color=red]
  GL3 [label = "GC sweep wait" , group=gl, color=white]

  G4 [label = "G4" , shape=circle , group=g, color=red]
  GL4 [label = "GC scavenge wait" , group=gl, color=white]

  G6 [label = "G6" , shape=circle , group=g, color=red]
  GL6 [label = "GC scavenge wait" , group=gl, color=white]

  G7 [label = "G7" , shape=circle , group=g, color=blue]
  GL7 [label = "GC scavenge wait" , group=gl, color=white]

  M0 [label = "M0" , shape= triangle, group=m, style=filled, fillcolor=yellow ]
  M1 [label = "M1" , shape=triangle, group=m, style="dashed,filled", fillcolor=white]
  M2 [label = "M2" , shape= triangle, group=m, style=filled, fillcolor=yellow]
  M3 [label = "M3" , shape= triangle, group=m, style=filled, fillcolor=yellow]


    {rank=same; P0; P1;}
    {rank=same; G1; G2; G3; G4; G6; G7;}
    {rank=same; GL1; GL2; GL3; GL4; GL6; GL7;}
    {rank=same; M0; M1; M2; M3}
    //{rank=same; G1; GL1; M0; P0}

  P0 -> P1 [style=invis]
  G1 -> G2 [style=invis]
  G2 -> G3 [style=invis]
  G3 -> G4 [style=invis]
  G4 -> G6 [style=invis]
  G6 -> G7 [style=invis]
  GL1 -> GL2 [style=invis]
  GL2 -> GL3 [style=invis]
  GL3 -> GL4 [style=invis]
  GL4 -> GL6 [style=invis]
  GL6 -> GL7 [style=invis]
  GL1 -> G1 [style=invis]
  GL2 -> G2 [style=invis]
  GL3 -> G3 [style=invis]
  GL4 -> G4 [style=invis]
  GL6 -> G6 [style=invis]
  GL7 -> G7 [style=invis]
  M0 -> M1 [style=invis]
  M1 -> M2 [style=invis]
  M2 -> M3 [style=invis]
  S0 -> P0 [style=invis]
  S0 -> M0 [style=invis]
  S0 -> G1 [style=invis]
  G7 -> M0
  G1 -> M3
  M3 -> P0
  M0 -> P1



  /*

  invisible edges for all Gs
  invisible edges for all Ms
  invisible edges for all Ps
  visible edges from G to M
  visible edges from M to P

  Color legend for Gs:
  Gidle,            // 0 = yellow
Grunnable,        // 1 runnable and on a run queue = light green
Grunning,         // 2 running = green
Gsyscall,         // 3 performing a syscall = blue
Gwaiting,         // 4 waiting for the runtime = red
Gmoribund_unused, // 5 currently unused, but hardcoded in gdb scripts = orange
Gdead,            // 6 goroutine is dead = black
Genqueue,         // 7 only the Gscanenqueue is used  = pink
Gcopystack,       // 8 in this state when newstack is moving the stack = brown

locked = dashed


Legend for Ms:
blocked true:  filled yellow
blocked false:

spinning true: style: rounded

locks : style dashed


*/
}
